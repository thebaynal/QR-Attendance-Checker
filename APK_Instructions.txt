================================================================================
APK BUILDING INSTRUCTIONS FOR ANDROID PHONE
================================================================================

Date: December 7, 2025
Status: Complete Step-by-Step Guide
Time Required: 30-45 minutes (first time)

================================================================================
WHAT IS AN APK?
================================================================================

APK = Android Package File
It's the app installer file for Android phones (like .exe for Windows)

Process: Your Code â†’ Buildozer â†’ APK File â†’ Install on Phone

================================================================================
PREREQUISITES (WHAT YOU NEED INSTALLED)
================================================================================

âœ“ Windows PowerShell
âœ“ Python 3.8+ (already have it)
âœ“ Virtual environment activated (already have it)
âœ“ Java Development Kit (JDK) - NEED TO INSTALL
âœ“ Buildozer - NEED TO INSTALL
âœ“ Cython - NEED TO INSTALL

================================================================================
STEP 1: INSTALL JAVA DEVELOPMENT KIT (JDK)
================================================================================

1. Go to: https://www.oracle.com/java/technologies/downloads/

2. Download: JDK 17 or latest (Windows x64 installer)

3. Run the installer:
   - Click through all prompts
   - Accept license agreement
   - Click "Next" for all options
   - Installation completes

4. Verify Java installed:

   PowerShell:
     java -version

   Should show:
     java version "17.x.x"
     Java(TM) SE Runtime Environment...

If error "java not found" â†’ Restart PowerShell and try again

================================================================================
STEP 2: INSTALL BUILDOZER AND CYTHON
================================================================================

PowerShell (in your project folder):

1. Navigate to project:
   cd C:\Users\thebaynal\Desktop\QR-Attendance-Checker

2. Activate virtual environment:
   .\.venv\Scripts\Activate.ps1

   You should see: (.venv) at start of prompt

3. Install packages:
   pip install buildozer cython

   Wait for completion (might take 5 minutes)

4. Verify installation:
   buildozer --version

   Should show: buildozer version X.X.X

================================================================================
STEP 3: CREATE buildozer.spec FILE
================================================================================

This file tells Buildozer how to build your app.

CREATE NEW FILE:

Location: C:\Users\thebaynal\Desktop\QR-Attendance-Checker\buildozer.spec

Copy entire content below and save:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[app]

# Application title (what shows in app list)
title = QR Attendance Checker

# Package name (no spaces, lowercase, unique)
package.name = qrattendance

# Package domain (reverse domain, must be unique)
package.domain = org.thebaynal

# Source code directory
source.dir = final-project/src

# Include files (what to copy to app)
source.include_exts = py,png,jpg,kv,atlas,db

# App version
version = 1.0.0

# Python requirements (what libraries needed)
requirements = python3,flet,sqlite3,pillow,bcrypt,requests

# Screen orientation
orientation = portrait

# Android permissions (phone features app can use)
android.permissions = CAMERA,INTERNET,WRITE_EXTERNAL_STORAGE,READ_EXTERNAL_STORAGE

# Android features (hardware needed)
android.features = android.hardware.camera

# Minimum Android version (oldest phones supported)
android.minapi = 21

# Target Android version (newest version it was tested on)
android.targetapi = 33

# Architecture (phone processor type)
android.archs = arm64-v8a

# Logcat filters (debug output)
android.logcat_filters = *:S python:C

# Icon (optional - comment out if no icon)
# android.icon = data/icon.png

# Presplash screen (optional - comment out if no splash)
# android.presplash = data/presplash.png

[buildozer]

# Log verbosity (2 = info level)
log_level = 2

# Display warnings
warn_on_root = 1

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SAVE THE FILE

After saving, verify:
- File exists in: C:\Users\thebaynal\Desktop\QR-Attendance-Checker\buildozer.spec
- File size: ~1 KB

================================================================================
STEP 4: UPDATE buildozer.spec (IMPORTANT!)
================================================================================

Edit buildozer.spec and change this line:

FIND:
  package.domain = org.thebaynal

CHANGE TO (use your own unique domain):
  package.domain = com.yourname.qrattendance

Examples:
  package.domain = com.ahmed.qrattendance
  package.domain = com.school.attendance
  package.domain = com.mycompany.attendance

Why? Android requires globally unique package names.

SAVE FILE (Ctrl+S)

================================================================================
STEP 5: VERIFY YOUR APP CODE
================================================================================

Before building, verify your app starts correctly:

PowerShell:
  .\.venv\Scripts\Activate.ps1
  python final-project/src/main.py

The app should launch!

Close app: Ctrl+C

This verifies code is ready for APK.

================================================================================
STEP 6: BUILD THE APK (THE MAIN STEP!)
================================================================================

THIS IS WHERE THE MAGIC HAPPENS!

Buildozer will:
  âœ“ Compile your Python code
  âœ“ Download Android libraries
  âœ“ Build the APK file
  âœ“ Takes 15-30 minutes first time

PowerShell (make sure venv is activated):

  buildozer android debug

Then WAIT... This takes a while!

You'll see lots of output (this is NORMAL):

  Creating directory...
  Downloading SDK...
  Downloading NDK...
  Compiling Python...
  Building APK...

SUCCESSFUL BUILD OUTPUT:

  # Build succeeded.
  # APK location: bin/qrattendance-1.0.0-debug.apk

FAILED BUILD - COMMON ERRORS:

âŒ "Java not found"
  â†’ Java not installed correctly
  â†’ Solution: Restart PowerShell, try again

âŒ "Android SDK not found"
  â†’ First time downloads SDK (can be 30+ minutes)
  â†’ Solution: Be patient, can take very long time first time

âŒ "Build failed"
  â†’ Various issues
  â†’ Solution: Read error message carefully, search online

If build fails:
  1. Read the error message
  2. Try again: buildozer android clean
  3. Then: buildozer android debug

================================================================================
STEP 7: FIND YOUR APK FILE
================================================================================

After successful build, your APK is ready!

Location: C:\Users\thebaynal\Desktop\QR-Attendance-Checker\bin\

File name: qrattendance-1.0.0-debug.apk

File size: ~40-60 MB (normal)

BACKUP THIS FILE:

Copy to safe location:
  C:\Users\thebaynal\Desktop\QR-Attendance-Checker-Backup\

================================================================================
STEP 8: INSTALL APK ON YOUR PHONE
================================================================================

YOU HAVE 3 OPTIONS:

OPTION A: USB CABLE + ADB (FASTEST - RECOMMENDED)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Requirements:
  âœ“ USB cable that works (data cable, not just charging)
  âœ“ Phone
  âœ“ Android Debug Bridge (adb) - comes with buildozer

Steps:

1. Connect phone to laptop with USB cable

2. Enable USB Debugging on phone:

   Settings â†’ Developer Options â†’ USB Debugging â†’ ON

   If no "Developer Options":
     Settings â†’ About Phone â†’ Tap "Build Number" 7 times
     Now Developer Options appears â†’ USB Debugging â†’ ON

3. On phone, allow USB Debugging when prompted

4. PowerShell - List devices:

   adb devices

   Should show:
   
     List of attached devices
     ABC1234DEF5678  device

5. PowerShell - Install APK:

   adb install bin\qrattendance-1.0.0-debug.apk

   Wait for:
     Success

6. Check phone:
   - App "QR Attendance Checker" appears
   - Click to open

OPTION B: FILE MANAGER (MANUAL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Connect phone with USB cable

2. Copy APK to phone:
   From: bin\qrattendance-1.0.0-debug.apk
   To: Phone â†’ Internal Storage â†’ Downloads

3. On phone:
   - Open File Manager
   - Go to Downloads
   - Find qrattendance-1.0.0-debug.apk
   - Tap it
   - Allow "Unknown sources" if asked
   - Tap "Install"

4. Wait for completion

OPTION C: EMAIL OR CLOUD (SLOWEST)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Upload APK to Google Drive or email to yourself

2. On phone:
   - Download from Drive or email
   - Open file
   - Allow "Unknown sources" if asked
   - Tap "Install"

================================================================================
STEP 9: FIRST RUN ON PHONE
================================================================================

1. Tap app icon "QR Attendance Checker"

2. First launch takes 30 seconds (loading Python)

3. See login screen

4. Login:
   Username: admin
   Password: AdminPass456!@#$%^&*

5. App opens!

GRANT PERMISSIONS:

App might ask for:
  âœ“ Camera - Allow (for QR scanning)
  âœ“ Storage - Allow (for database)
  âœ“ Internet - Allow (for API)

Tap "Allow" for each.

================================================================================
STEP 10: CONNECT TO LAPTOP DATABASE (IMPORTANT!)
================================================================================

Now app is on phone, but database is on laptop.

YOU NEED API SERVER RUNNING!

TERMINAL 1 (Laptop):

Start API Server:
  .\.venv\Scripts\Activate.ps1
  python final-project/src/api_server.py

You should see:
  ========================================================
  QR ATTENDANCE CHECKER - API SERVER
  ========================================================
  API Key: QRAttendanceAPI_SecureKey_789!@#$%
  Starting server on http://0.0.0.0:5000
  ========================================================

KEEP THIS RUNNING! Don't close this terminal.

FIND YOUR LAPTOP IP:

TERMINAL 2:
  ipconfig

Look for: "IPv4 Address" (e.g., 192.168.1.100)

UPDATE PHONE APP CONFIGURATION:

On phone app:
  - Settings â†’ API Configuration
  - API Server: http://192.168.1.100:5000
  - API Key: QRAttendanceAPI_SecureKey_789!@#$%
  - Save

(Or edit .env before building APK with IP already configured)

VERIFY CONNECTION:

On phone:
  - Login again
  - Go to Activity Log or Scan
  - Should sync with laptop

If works âœ“ â†’ Connected!
If fails âœ— â†’ Check:
  - API server running on laptop
  - Phone on same WiFi
  - IP address correct
  - API key matches

================================================================================
QUICK REFERENCE COMMANDS
================================================================================

Install packages:
  pip install buildozer cython

Create APK:
  buildozer android debug

Clean old builds:
  buildozer android clean

Install on phone:
  adb install bin\qrattendance-1.0.0-debug.apk

Find APK file:
  bin\qrattendance-1.0.0-debug.apk

Start API Server:
  python final-project/src/api_server.py

Find laptop IP:
  ipconfig

================================================================================
TROUBLESHOOTING
================================================================================

PROBLEM: "Build takes forever"
SOLUTION: First build is slow (downloads SDK)
  - Can take 30-60 minutes first time
  - Subsequent builds are faster (5-10 minutes)
  - Don't close terminal or restart

PROBLEM: "App crashes on startup"
SOLUTION: Python code has error
  - Test locally: python final-project/src/main.py
  - Fix any errors
  - Rebuild APK

PROBLEM: "Can't scan QR codes"
SOLUTION: Camera permission not granted
  - Phone Settings â†’ Apps â†’ QR Attendance Checker
  - Permissions â†’ Camera â†’ Allow
  - Restart app

PROBLEM: "Can't connect to database"
SOLUTION: API server not running or wrong IP
  - Check: API server running on laptop
  - Check: Phone on same WiFi
  - Check: IP address correct in config
  - Try: Restart both app and API

PROBLEM: "APK installation fails"
SOLUTION: Phone setting issue
  - Phone â†’ Settings â†’ Security
  - Enable "Unknown sources"
  - Try installing again

PROBLEM: "Can't find APK file"
SOLUTION: Build didn't complete
  - Check for errors in build output
  - Try: buildozer android clean
  - Then: buildozer android debug

================================================================================
NEXT BUILDS ARE FASTER!
================================================================================

First build: 30-60 minutes (downloads everything)
Later builds: 5-10 minutes (reuses downloads)

To rebuild after code changes:

  buildozer android debug

Then install:

  adb install bin\qrattendance-1.0.0-debug.apk

That's it!

================================================================================
YOU'VE GOT THIS! ğŸ‰
================================================================================

Building your first APK is a big achievement!

You now have:
  âœ“ Laptop app with full features
  âœ“ Phone app for portable scanning
  âœ“ Secure database on laptop
  âœ“ API connection between devices

Next steps:
  1. buildozer android debug
  2. adb install bin\qrattendance-1.0.0-debug.apk
  3. Use app!

Happy scanning! ğŸ“±ğŸ”

================================================================================
SUPPORT
================================================================================

If stuck:
  - Read error message carefully
  - Search error online
  - Check SECURITY_SETUP_GUIDE.txt
  - Try building again

Questions?
  - Read this file again
  - Check START_HERE.txt
  - Check QUICK_START.txt

You've already built a secure, production-ready app!
Building the APK is just the next step. You can do this! ğŸ’ª

================================================================================
